{% load staticfiles %}
{% load bootstrap %}
{% load googlecharts %}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tasker</title>

	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href={% static "/materialize/css/materialize.min.css"%} media="screen,projection" />
     <!--Bootstrap Styles>-->
    <link href={% static "/css/bootstrap.css"%} rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href={% static "/css/font-awesome.css"%} rel="stylesheet" />
    <!-- Morris Chart Styles-->
    <link href={% static "/js/morris/morris-0.4.3.min.css"%} rel="stylesheet" />
    <!-- Custom Styles-->
    <link href={% static "/css/custom-styles.css"%} rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href={% static "/css/jquery-ui-1.8.4.css"%} />
    <link rel="stylesheet" type="text/css" href={% static "/css/jquery.ganttView.css"%} />

    <!-- Google Fonts-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href={% static "/js/Lightweight-Chart/cssCharts.css"%}>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.8/angular.min.js"></script>

</head>

    {% block javascript %}
        <script type="text/javascript">
        function openbox(id){
            display = document.getElementById(id).style.display;
            if(display=='none'){
               document.getElementById(id).style.display='block';
            }else{
               document.getElementById(id).style.display='none';
            }
        }
    </script>
    <script>
        function show()
        {
            $.ajax({
                url: "{% url 'get_recent_task' %}",
                dataType: 'json',
                success: function (data) {
                  $.each(data, function( key, value ) {
                      var tmpl = [
                      '<div id="myAlert5" class="alert alert-success">',
                          '   <span class="close">&times;</span>',
                          '   <a href="%KEY%">%value%</a>',
                          '   <a href="%KEY%not_remind">| Не напоминать</a>',
                      '</div>'
                        ].join("\n");
                        var el = document.getElementById('alert');

                    //function addMore() {
                      var html = tmpl
                        .replace(/%KEY%/g, key)
                        .replace(/%value%/g, value)
                      ;
                      el.innerHTML = html + el.innerHTML;
                    //}

                      // действия, которые будут выполняться для каждого свойства объекта
                      // key - текущее имя свойства массива
                      // value - значение текущего свойства объекта

                      // выведем имя свойства и его значение в консоль
                      console.log( 'Свойство: ' +key + '; Значение: ' + value );
                      //addMore()

                        $(".close").click(function(){
                            $("#myAlert5").alert('close');
                        });

                    });
                }
            });
        }
    </script>

{% endblock %}

</head>

<body onload="show()">
    <div id="wrapper">

                 {% if user.is_authenticated %}
                {% profile_menu user%}
                {% project_recent_list request user %}{% endif %}

                {% block content %}
                {% endblock %}

     {% if user.is_authenticated %}
        <div class="fixed-action-btn horizontal click-to-toggle">
        <a class="btn-floating btn-large red">
          <i class="material-icons">menu</i>
        </a>
        <ul>
          <li><a class="btn-floating red" href="{% url 'task_new' %}"><i class="glyphicon glyphicon-plus-sign"></i></a></li>
        </ul>
      </div>
    {% endif %}


            </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
    <!-- JS Scripts-->
    <!-- jQuery Js -->
    <script src={% static "/js/jquery-1.10.2.js"%}></script>

	<!-- Bootstrap Js -->
    <script src={% static "/js/bootstrap.min.js"%}></script>

	<script src={% static "/materialize/js/materialize.min.js"%}></script>

    <!-- Metis Menu Js -->
    <script src={% static "/js/jquery.metisMenu.js"%}></script>
    <!-- Morris Chart Js -->
    <script src={% static "/js/morris/raphael-2.1.0.min.js"%}></script>
    <script src={% static "/js/morris/morris.js"%}></script>


	<script src={% static "/js/easypiechart.js"%}></script>
	<script src={% static "/js/easypiechart-data.js"%}></script>

	 <script src={% static "/js/Lightweight-Chart/jquery.chart.js"%}></script>

    <!-- Custom Js -->
    <script src={% static "js/parse_date.js" %}></script>
    <script src={% static "js/custom-scripts.js"%}></script>
    <script src={% static "js/main.js"%}></script>
    <script type="text/javascript" src={% static "js/date.js"%}></script>
    <script type="text/javascript" src={% static "js/jquery-ui-1.8.4.js"%}></script>
	<script type="text/javascript" src={% static "js/jquery.ganttView.js"%}></script>

    <script type="text/javascript">
		$.ajax({
                    url: $("#url_ajax_gantt").attr('url_ajax_gantt'),
                    dataType: 'json',
                    success: function (data){$(function () {
			$("#ganttChart").ganttView({
				data: data,
				slideWidth: 'inherit',
                behavior: {
					onClick: function (data) {
						var msg = "You clicked on an event: { start: " + data.start.toString("M/d/yyyy") + ", end: " + data.end.toString("M/d/yyyy") + " }";
						$("#eventMessage").text(msg);
					},
					onResize: function (data) {
						var msg = "You resized an event: { start: " + data.start.toString("M/d/yyyy") + ", end: " + data.end.toString("M/d/yyyy") + " }";
						$("#eventMessage").text(msg);
					},
					onDrag: function (data) {
						var msg = "You dragged an event: { start: " + data.start.toString("M/d/yyyy") + ", end: " + data.end.toString("M/d/yyyy") + " }";
						$("#eventMessage").text(msg);
					}
				}
			});
		});}})
	</script>
    	 <!-- DATA TABLE SCRIPTS -->
    <script src="{% static "js/dataTables/jquery.dataTables.js"%}"></script>
    <script src="{% static "js/dataTables/dataTables.bootstrap.js"%}"></script>
    <script>
            $(document).ready(function () {
                $('#dataTables-example').dataTable();
            });
    </script>

</body>

</html>