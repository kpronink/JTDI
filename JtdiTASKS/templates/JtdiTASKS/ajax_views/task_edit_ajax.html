{% load widget_tweaks %}{% load static %}

<form method="post" action="{% url 'task_update' pk=task.pk %}" class="ui medium form" id="task_create_form">
    {% csrf_token %}
    <h4 class="ui dividing header">Изменение задачи</h4>
    <div class="field">
        {{ form.non_field_errors }}
        <div class="two fields">
            <div class="required field">
                {{ form.title.errors }}
                <label for="{{ form.title.id_for_label }}">{{ form.title.label }}:</label>
                {{ form.title }}
            </div>
            <div class="required field">
                {{ form.date.errors }}
                <label for="{{ form.date.id_for_label }}">{{ form.date.label }}:</label>
                {{ form.date }}
            </div>
        </div>
    </div>
    <div class="field">
        {{ form.non_field_errors }}
        <div class="two fields">
            <div class="field">
                {{ form.description.errors }}
                <label for="{{ form.description.id_for_label }}">{{ form.description.label }}:</label>
                {{ form.description }}
            </div>
            <div class="required field">
                {{ form.time.errors }}
                <label for="{{ form.time.id_for_label }}">{{ form.time.label }}:</label>
                {{ form.time }}
            </div>
        </div>
    </div>
    <div class="field">
        {{ form.non_field_errors }}
        <div class="two fields">
            <div class="field">
                {{ form.priority.errors }}
                <label for="{{ form.priority.id_for_label }}">{{ form.priority.label }}:</label>
                {{ form.priority }}
            </div>
            <div class="field">
                {{ form.planed_date_finish.errors }}
                <label for="{{ form.planed_date_finish.id_for_label }}">{{ form.planed_date_finish.label }}:</label>
                {{ form.planed_date_finish }}
            </div>
        </div>
    </div>
    <div class="field">
        {{ form.non_field_errors }}
        <div class="two fields">
            <div class="field">
                {{ form.project.errors }}
                <label for="{{ form.project.id_for_label }}">{{ form.project.label }}:</label>
                {{ form.project }}
            </div>
            <div class="field">
                {{ form.performer.errors }}
                <label for="{{ form.performer.id_for_label }}">{{ form.performer.label }}:</label>
                {{ form.performer }}
            </div>
        </div>
    </div>
    <div class="field">
        {{ form.non_field_errors }}
        <div class="two fields">
            <div class="field">
                {{ form.repeating.errors }}
                <div class="ui toggle checkbox">
                    {{ form.repeating }}
                    <label for="{{ form.repeating.id_for_label }}">{{ form.repeating.label }}:</label>
                </div>
            </div>
            <div class="field">
                {{ form.remind.errors }}
                <div class="ui toggle checkbox">
                    {{ form.remind }}
                    <label for="{{ form.remind.id_for_label }}">{{ form.remind.label }}:</label>
                </div>
            </div>
        </div>
    </div>

    <div class="field">
        {% verbatim %} <span>Распознано как:</span> <b id="parse"></b>
        <br/> <span>Дата:</span> <b id="parse_date"></b> {% endverbatim %}
    </div>

    <button type="button" class="ui black deny button" onclick="CloseModal()">Закрыть</button>
    <button type="submit" class="ui positive right labeled icon button">Сохранить</button>

</form>

<script>
    $('#id_project').on('change', function () {
        ProjectSelect(this.value)
    })
</script>